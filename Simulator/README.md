# isam-simulator
Decription:
the simulator environment looks like, where the x indicates the landmarks, the dash line indicate the noise-Free odometry trajectory.
By default, we will have 4 landmarks at each row. The rob will move in rectangle cycle

Each time, it will take at most 2 observations, with bearing and range, It will incorporate observations and odometry input and update the
its positions and landmarks' positions after "incK" steps. The video are produced based on one-step update frequency and known data association.  The actually movement and observation will be noisy, controlled by the Param struct, generated by the generateScript function. You can set your own initial position and covariance.

Define graph procedure:
To be more precise, the initial position and initial covariance are set by value.insert(initPose), and graph.add(PriorFactorPose2(noiseModels.priorNoise)), which are provided by the gtsam library. They should be defined in global coordinate.
The odometry are inserted into the graph by graph.add(BetweenFactorPose2(lastPoseIndex, thisPoseIndex,odometry,noiseModel))
The observation are inserted into the graph by graph.add(BearingRangeFactor2D(robPoseIndex, landmarkIndex, bearing, range, noiseModels))
To solve the least square problem, by firstly define the Optimizer like LevenbergMarquardtOptimizer, then solve it by calling optimizer optimize function. After solving each batch, we will collect another batch of newFactors and initial values of nodes, so that we will 
reinitialize the graphs and values correspondingly 

Notes:
In order to run the demo, please change the path to gtsam_toolbox appropriately.

 
